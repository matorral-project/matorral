{# Improved email template base with Matorral branding #}
{% load i18n %}
<!doctype html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">
  <head>
    <title>{% block title %}{% endblock %}</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css">
      #outlook a{padding: 0;}
      .ReadMsgBody{width: 100%;}
      .ExternalClass{width: 100%;}
      .ExternalClass *{line-height: 100%;}
      body{margin: 0; padding: 0; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;}
      table, td{border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt;}
      img{border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;}
      p{display: block; margin: 13px 0;}
    </style>
    <!--[if !mso]><!-->
    <style type="text/css">
      @media only screen and (max-width:480px) {
        @-ms-viewport {width: 320px;}
        @viewport { width: 320px; }
      }
    </style>
    <!--<![endif]-->
    <!--[if mso]>
    <xml>
      <o:OfficeDocumentSettings>
        <o:AllowPNG/>
        <o:PixelsPerInch>96</o:PixelsPerInch>
      </o:OfficeDocumentSettings>
    </xml>
    <![endif]-->
    <!--[if lte mso 11]>
    <style type="text/css">
      .outlook-group-fix{width:100% !important;}
    </style>
    <![endif]-->
    <style type="text/css">
      @media only screen and (min-width:480px) {
        .dys-column-per-100 { width: 100.000000% !important; max-width: 100.000000%; }
      }
    </style>
  </head>
  <body style="background-color: #f5f1e8;">
    {# Preheader for email clients #}
    <div style="display: none; font-size: 1px; color: #fefefe; line-height: 1px; max-height: 0; max-width: 0; opacity: 0; overflow: hidden;">
      {% block preheader %}{% endblock %}
    </div>

    {# Header with logo #}
    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #344e41;">
      <tr>
        <td align="center" style="padding: 20px;">
          <table border="0" cellpadding="0" cellspacing="0" width="600" style="max-width: 600px;">
            <tr>
              <td align="left" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
                <span style="font-size: 24px; font-weight: 700; color: #a3b18a; letter-spacing: -0.5px;">Matorral</span>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>

    {# Main content area #}
    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #ffffff;">
      <tr>
        <td align="center" style="padding: 40px 20px;">
          <table border="0" cellpadding="0" cellspacing="0" width="600" style="max-width: 600px;">
            <tr>
              <td style="direction:ltr;font-size:0px;padding:0;text-align:left;vertical-align:top;">
                <div class='dys-column-per-100 outlook-group-fix' style='direction:ltr;display:inline-block;font-size:13px;text-align:left;vertical-align:top;width:100%;'>
                  <table border='0' cellpadding='0' cellspacing='0' role='presentation' style='vertical-align:top;' width='100%'>
                    <tr>
                      <td align='left' style='font-size:0px;padding:0 10px 20px;word-break:break-word;'>
                        {# Email title #}
                        <h1 style="margin: 0 0 16px 0; color: #344e41; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 24px; font-weight: 600; line-height: 1.3;">
                          {% block email_title %}{% endblock %}
                        </h1>
                        {# Message body #}
                        <div style='color:#344e41;font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;font-size:16px;line-height:1.6;text-align:left;'>
                          {% block message_body %}
                          {% endblock %}
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>

    {# CTA Button #}
    {% block cta %}
    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #ffffff;">
      <tr>
        <td align="center" style="padding: 0 20px 40px;">
          <table border="0" cellpadding="0" cellspacing="0">
            <tr>
              <td align="center" bgcolor="#588157" role="presentation" style="background-color:#588157;border:none;border-radius:6px;cursor:auto;padding:0;" valign="middle">
                <a href="{% block cta_link %}{% endblock %}" style="background:#588157;color:#f5f1e8;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;font-size:16px;font-weight:600;line-height:100%;margin:0;padding:14px 28px;text-decoration:none;text-transform:none;display:inline-block;border-radius:6px;" target="_blank">
                  {% block cta_text %}{% endblock %}
                </a>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
    {% endblock cta %}

    {# Alternative link (fallback) #}
    {% block cta_fallback %}
    {% endblock %}

    {# Footer #}
    <table border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: #f5f1e8;">
      <tr>
        <td align="center" style="padding: 30px 20px;">
          <table border="0" cellpadding="0" cellspacing="0" width="600" style="max-width: 600px;">
            <tr>
              <td align="center" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; font-size: 13px; color: #a3b18a; line-height: 1.5;">
                {% block footer %}
                  <p style="margin: 0 0 8px 0;">
                   {% translate "This email was sent to you because you created an account on" %} <a target="_blank" href="https://{{ site_domain }}" style="color: #3f5c0c;">{{ site_name }}.</a>
                  </p>
                  <p style="margin: 0;">If you didn't request this, you can safely ignore this email.</p>
                {% endblock %}
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>
