<script>
  function initNotifications() {
    document.querySelectorAll('.notification').forEach((notification) => {
      // Set up close button
      const deleteBtn = notification.querySelector('.delete');
      if (deleteBtn) {
        deleteBtn.addEventListener('click', () => {
          notification.remove();
        });
      }
      // Auto-dismiss after 5 seconds
      setTimeout(() => {
        notification.remove();
      }, 5000);
    });
  }

  document.addEventListener('DOMContentLoaded', initNotifications);
  document.body.addEventListener('htmx:oobAfterSwap', (event) => {
    if (event.detail.target.id === 'messages') {
      initNotifications();
    }
  });
</script>
